function getScrolloffset(obj,run){var myScroll=[0,0,false];if(!obj)return myScroll;if(run&&obj.myRun==run)return obj.myScrolloffset;var nodeName=obj.myTagName;if(!nodeName){nodeName=obj.tagName.toUpperCase();obj.myTagName=nodeName;};if(nodeName!="BODY"&&nodeName!="HTML"){myScroll=getScrolloffset(obj.parentNode,run);var scrollLeft=obj.scrollLeft;if(!isNaN(scrollLeft)&&scrollLeft>0){myScroll[0]+=scrollLeft;};var scrollTop=obj.scrollTop;if(!isNaN(scrollTop)&&scrollTop>0){myScroll[1]+=scrollTop;};if(!myScroll[2]){if(obj.myPosition!=null){if(obj.myPosition)myScroll[2]=true;}else{obj.myPosition=false;}}};obj.myScrolloffset=myScroll;obj.myRun=run;return myScroll;};function getStyle(obj,prop){if(obj.style&&obj.style[prop])return obj.style[prop];if(obj.currentStyle)return obj.currentStyle[prop];if(window.getComputedStyle)return window.getComputedStyle(obj,null).getPropertyValue(prop);};function getPos(obj,run){var curleft=curtop=0;var self=obj;if(obj.offsetParent){curleft=obj.offsetLeft;curtop=obj.offsetTop;while(obj=obj.offsetParent){curleft+=obj.offsetLeft;curtop+=obj.offsetTop;if(obj.myPosition!=null){if(obj.myPosition)break;}else{obj.myPosition=false;}}};obj=self;var myScroll=getScrolloffset(obj,run);curleft-=myScroll[0];curtop-=myScroll[1];if(myScroll[2]){var scrollLeft=document.body.scrollLeft||document.documentElement.scrollLeft;if(!isNaN(scrollLeft)&&scrollLeft>0){curleft+=scrollLeft;};var scrollTop=document.body.scrollTop||document.documentElement.scrollTop;if(!isNaN(scrollTop)&&scrollTop>0){curtop+=scrollTop;}};return[curtop,curleft,myScroll[2]];};function getEvtPos(e){var t=e.pageY?e.pageY:e.clientY+(document.body.scrollTop?window.document.body.scrollTop:document.documentElement.scrollTop);var l=e.pageX?e.pageX:e.clientX+(document.body.scrollLeft?window.document.body.scrollLeft:document.documentElement.scrollLeft);return[t,l];};function dump_var(u_var,n_depth){if(n_depth==null)n_depth=0;var s_tabs="\n";for(var i=0;i<n_depth;i++)s_tabs+="\t";n_depth++;if(typeof(u_var)=='number')return u_var;else if(typeof(u_var)=='string')return "'"+u_var+"'";else if(typeof(u_var)=='boolean')return(u_var?'true':'false');else if(typeof(u_var)=='undefined'||u_var==null)return 'null';else if(typeof(u_var)=='function')return 'function () {alert(\'function was not saved\')};';var b_hash=false;for(var i in u_var)if(isNaN(Number(i))){b_hash=true;break;};var s_output='',b_first=true;if(b_hash){s_output+="{";for(var i in u_var){s_output+=(b_first?'':",")+s_tabs+"\t'"+i+"': "+dump_var(u_var,n_depth);b_first=false;};s_output+=s_tabs+"};";}else{s_output+="[";for(var i=0;i<u_var.length;i++){s_output+=(b_first?'':",")+s_tabs+"\t"+dump_var(u_var,n_depth);b_first=false;};s_output+=s_tabs+"]";};return s_output;};var Reflection={defaultHeight:0.5,defaultOpacity:0.5,defaultMarginTop:0,add:function(image,options){Reflection.remove(image);doptions={"height":Reflection.defaultHeight,"opacity":Reflection.defaultOpacity,"marginTop":Reflection.defaultMarginTop};if(options){for(var i in doptions){if(!options[i]){options[i]=doptions[i];}}}else{options=doptions;};try{var d=document.createElement('div');var p=image;p.style.float="none";var classes=p.className.split(' ');var newClasses='';for(j=0;j<classes.length;j++){if(classes[j]!="reflect"){if(newClasses){newClasses+=' '};newClasses+=classes[j];}};var reflectionHeight=Math.floor(p.height*options['height']);var divHeight=Math.floor(p.height*(1+options['height']));var reflectionWidth=p.width;if(document.all&&!window.opera){if(p.parentElement.tagName=='A'){var d=document.createElement('a');d.href=p.parentElement.href;};d.className=newClasses;p.className='reflected';d.style.cssText=p.style.cssText;p.style.cssText='vertical-align: bottom';var reflection=document.createElement('img');reflection.src=p.src;reflection.style.width=reflectionWidth+'px';reflection.style.display='block';reflection.style.height=p.height+"px";reflection.style.marginBottom="-"+(p.height-reflectionHeight)+'px';reflection.style.marginTop=options['marginTop']+'px';reflection.style.filter='flipv progid:DXImageTransform.Microsoft.Alpha(opacity='+(options['opacity']*100)+', style=1, finishOpacity=0, startx=0, starty=0, finishx=0, finishy='+(options['height']*100)+')';d.style.width=reflectionWidth+'px';d.style.height=divHeight+'px';p.parentNode.replaceChild(d,p);d.appendChild(p);d.appendChild(reflection);}else{var canvas=document.createElement('canvas');if(canvas.getContext){d.className=newClasses;p.className='reflected';d.style.cssText=p.style.cssText;p.style.cssText='vertical-align: bottom';var context=canvas.getContext("2d");canvas.style.height=reflectionHeight+'px';canvas.style.width=reflectionWidth+'px';canvas.style.float='none';canvas.height=reflectionHeight;canvas.width=reflectionWidth;canvas.style.marginTop=options['marginTop']+'px';d.style.width=reflectionWidth+'px';d.style.height=divHeight+'px';p.parentNode.replaceChild(d,p);d.appendChild(p);d.appendChild(canvas);context.save();context.translate(0,image.height-1);context.scale(1,-1);context.drawImage(image,0,0,reflectionWidth,image.height);context.restore();context.globalCompositeOperation="destination-out";var gradient=context.createLinearGradient(0,0,0,reflectionHeight);gradient.addColorStop(1,"rgba(255, 255, 255, 1.0)");gradient.addColorStop(0,"rgba(255, 255, 255, "+(1-options['opacity'])+")");context.fillStyle=gradient;if(navigator.appVersion.indexOf('WebKit')!=-1){context.fill();}else{context.fillRect(0,0,reflectionWidth,reflectionHeight*2);}}}}catch(e){}},remove:function(image){if(image.className=="reflected"){image.className=image.parentNode.className;image.parentNode.parentNode.replaceChild(image,image.parentNode);}}};function addReflections(ids,rheight,ropacity){for(i=0;i<ids.length;i++){var rimage=document.getElementById(ids[i]);Reflection.add(rimage,{height:rheight,opacity:ropacity,marginTop:1});}};function removeReflections(ids){for(i=0;i<ids.length;i++){var rimage=document.getElementById(ids[i]);Reflection.remove(rimage);}};Math._3d=function(a,b,c,d,e,f,g){if(g==1)return a+this.cos(c+(this.PI/(e/2))*d)*f+f;if(g==2)return a+b*this.sin(c+(this.PI/(e/2))*d);if(g==3)return a+b*this.cos(c+(this.PI/(e/2))*d);};rotation=function(objName,divName,images,width,height,left,hradius,top,vradius,reduction,stepvalue,steptime){this.step=0;this.stepvalue=stepvalue;this.steptime=steptime;this.images=images;this.anzahl=images.length;this.objName=objName;this.divName=divName;this.width=width;this.height=height;this.left=left;this.hradius=hradius;this.top=top;this.vradius=vradius;this.reduction=reduction;this.radius=(100-reduction)/2;this.ids=new Array();};rotation.prototype.init=function(){var myDiv=document.getElementById(this.divName);if(!myDiv)return false;var cr='';for(x=0;x<this.anzahl;x++){cr+="<div id='"+this.objName+""+x+"' style=\"height:"+this.height+"px;width:"+this.width+"px;position:absolute;\"><img id=\""+this.objName+"image"+x+"\" style=\"position:relative;visibility:hidden;\" class=\"reflect\" src=\""+this.images[x].src+"\" /></div>";this.ids.push(this.objName+"image"+x);};myDiv.innerHTML=cr;return true;};rotation.prototype.returnObj=function(id){return(document.all)?document.all[id]:document.getElementById(id);};rotation.prototype.move=function(){this.step+=this.stepvalue;for(x=0;x<this.anzahl;x++){this.returnObj(this.objName+""+x).style.left=Math._3d(this.left,this.hradius,this.step,x,this.anzahl,0,2)+"px";this.returnObj(this.objName+""+x).style.top=Math._3d(this.top,this.vradius,this.step,x,this.anzahl,0,3)+"px";var percent=Math._3d(this.reduction,0,this.step,x,this.anzahl,this.radius,1);this.returnObj(this.objName+""+x).style.zIndex=parseInt(percent);resizeIm(this.divName,this.objName+"image"+x,percent/100,this.width,this.height);};setTimeout("adns['"+this.divName+"'].im.move()",this.steptime);};function resizeIm(container,id,value,width,height){var image=document.getElementById(id);if(!image)return;if(!image.complete)return;if(!image.owidth){image.owidth=image.width;image.oheight=image.height;image.style.visibility='visible';image.parentNode.style.visibility='visible';addReflections(new Array(id),adns[container].reflectionlength,adns[container].reflectionopacity);image=document.getElementById(id);if(!image)return;};image.style.width=parseInt(image.owidth*value)+"px";image.style.height=parseInt(image.oheight*value)+"px";var canvas=image.nextSibling;if(canvas){var sv=false;if(!canvas.owidth){canvas.owidth=canvas.width;canvas.oheight=canvas.height;sv=true;};canvas.style.width=parseInt(canvas.owidth*value)+"px";canvas.style.height=parseInt(canvas.oheight*value)+"px";if(sv)canvas.style.visibility='visible';};image.parentNode.style.width=image.style.width;image.parentNode.style.left=parseInt((width-image.width)/2)+"px";image.parentNode.style.top=parseInt((height-image.height)/2)+"px";};var adns=new Array();function ad_startup(container){adns[container].obj=document.getElementById(container);if(!adns[container].obj){window.setTimeout("ad_startup('"+adns[container].name+"')",10);return;};if(!adns[container].im){var complete=true;var mh=0;var mw=0;for(var i=0;i<adns[container].images.length;i++){if(!adns[container].images[i].complete){complete=false;break;};if(adns[container].images[i].height>mh)mh=adns[container].images[i].height;if(adns[container].images[i].width>mw)mw=adns[container].images[i].width;};if(complete){adns[container].im=new rotation(adns[container].name+"_im",adns[container].name,adns[container].images,mw,mh,adns[container].x,adns[container].rx,adns[container].y,adns[container].ry,adns[container].r,adns[container].stepvalue,adns[container].steptime);}};if(adns[container].im&&adns[container].im.init()){if(adns[container].obj.addEventListener){adns[container].obj.addEventListener("mouseover",ad_over,false);adns[container].obj.addEventListener("mousemove",ad_move,false);adns[container].obj.addEventListener("mouseout",ad_out,false);}else{adns[container].obj.attachEvent("onmouseover",ad_over);adns[container].obj.attachEvent("onmousemove",ad_move);adns[container].obj.attachEvent("onmouseout",ad_out);};adns[container].im.move();}else{window.setTimeout("ad_startup('"+adns[container].name+"')",10);}};function ad_move(e){if(!e)e=window.event;ad_over(e);};function ad_over(e){if(!e)e=window.event;var target=(e.target)?e.target:e.srcElement;container=target.id;var over_item=false;if(!adns[container]){container=container.replace(/_[^_]+$/,'');if(!adns[container]){return true;};over_item=true;};var dp=getPos(adns[container].obj);var ep=getEvtPos(e);var w=adns[container].obj.offsetWidth;var v=((ep[1]-dp[1])*2/w)-1;if(over_item&&v>-0.1&&v<0.1)v=0;adns[container].im.stepvalue=Math.abs(adns[container].stepvalue)*v*Math.abs(v)*-10;return false;};function ad_out(e){if(!e)e=window.event;var target=(e.target)?e.target:e.srcElement;container=target.id;var over_item=false;if(!adns[container]){container=container.replace(/_[^_]+$/,'');if(!adns[container]){return true;};over_item=true;};var dp=getPos(adns[container].obj);var ep=getEvtPos(e);var w=adns[container].obj.offsetWidth;var h=adns[container].obj.offsetHeight;var vw=ep[1]-dp[1];var vh=ep[0]-dp[0];if(vw<=0||vh<=0||vw>=w||vh>=h){adns[container].im.stepvalue=adns[container].stepvalue;return false;};return true;;};function ad_init(container,imagelist,x,rx,y,ry,r,sv,st,rl,ro){adns[container]=new Array();adns[container].images=new Array();for(var i=0;i<imagelist.length;i++){adns[container].images[i]=new Image();adns[container].images[i].src=imagelist[i];};adns[container].name=container;adns[container].x=x;adns[container].rx=rx;adns[container].y=y;adns[container].ry=ry;adns[container].r=r;adns[container].stepvalue=sv;adns[container].stetime=st;adns[container].reflectionlength=rl;adns[container].reflectionopacity=ro;ad_startup(container);};ad_init('ad_container_4',Array('./js/rotate/olimex-logo.jpg','./js/rotate/atmel-logo.jpg','./js/rotate/incircuit_header.jpg'),75,131,-5,10,40,0.006,20,0.25,0.5);
